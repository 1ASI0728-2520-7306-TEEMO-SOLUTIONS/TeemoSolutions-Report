<style>
  body {
    font-family: 'Times New Roman', sans-serif;
    text-align: justify;
    font-size: 12px;
    margin-left: 2em;
    margin-right: 2em;
    line-height: 2;
  }
  
  p {
    text-indent: 2em; /* Sangría en el primer renglón de cada párrafo */
  }

  h1 {
    margin-left: 0; /* No aplica sangría para el título principal */
  }

  h2 {
    margin-left: 0; /* No aplica sangría para subtítulos de nivel 2 */
  }

  h3 {
    margin-left: 2em; /* Aplica una sangría de 2em para subtítulos de nivel 3 */
  }

  h4 {
    margin-left: 4em; /* Aplica una sangría de 4em para subtítulos de nivel 4 */
  }
</style>

# Capítulo III: Requirements Specification

Este capítulo establece de manera precisa la especificación de requisitos de Macetech, incorporando prácticas consolidadas en el análisis de requisitos. Siguiendo el marco propuesto por Robertson, Robertson y Reed (2024) en Mastering the Requirements Process, se adopta un enfoque estructurado que abarca la obtención, modelado y priorización de necesidades, con el propósito de elaborar un documento de requisitos que cumpla con criterios de claridad, completitud, consistencia, trazabilidad y capacidad de modificación. El punto de partida es un análisis detallado de los resultados obtenidos en la fase de investigación, que incluye estudios de usuarios, procesos de needfinding y análisis competitivo, desde los cuales se construye la estructura conceptual que servirá de base para todo el desarrollo. Como enfoque metodológico, se presentan las secciones de To-Be Scenario Mapping, User Stories, Impact Map y Product Backlog, lo que asegura un ciclo de vida del producto flexible y centrado en la entrega continua de valor.

## 3.1. To-Be Scenario Mapping

En esta sección se documenta el proceso metodológico y los resultados obtenidos del To-Be Scenario Mapping, una herramienta clave para diseñar la experiencia futura de cada User Persona y compararla con el escenario actual (As-Is). A partir de un análisis detallado de los mapas As-Is, se proyectan las acciones, pensamientos y emociones del usuario a través de las columnas Steps, Doing, Thinking y Feeling, de manera que quede claro cómo Macetech transformará cada etapa de la interacción.

El procedimiento seguido por el equipo incluyó las siguientes etapas, alineadas con las recomendaciones de Kalbach (2020) para el mapeo de experiencias:

1. Preparación: Revisión exhaustiva de los mapas As-Is existentes y definición del alcance para cada User Persona.

2. Lluvia de ideas individual: Generación de propuestas de mejora enfocadas en optimizar actividades, percepciones y motivaciones del usuario.

3. Revisión colaborativa: Consolidación de ideas, identificación de fases clave como columnas del mapa y validación de su relevancia.

4. Nombramiento de fases: Asignación de títulos descriptivos a cada columna, representando los estados ideales del flujo de interacción.

5. Comparación As-Is vs. To-Be: Identificación y análisis de las diferencias más significativas, destacando las innovaciones y beneficios esperados en términos de eficiencia, usabilidad y satisfacción.

A continuación se presentan capturas de los mapas To-Be Scenario Mapping generados en la herramienta asignada para cada User Persona, con sus respectivas filas Steps, Doing, Thinking y Feeling, que muestran de forma clara las mejoras proyectadas en la experiencia del usuario.

###### Figura 14
*To-Be Scenario Mapping de nuestro segmento de agencias de embarcaciones navieras*

<td><img src="../../assets/img/chapter-III/to-be-shipping-agency.png" style="width:1000px; height:auto;" alt=""></td>

###### Figura 15
*To-Be Scenario Mapping de nuestro segmento de transportistas marítimos*

<td><img src="../../assets/img/chapter-III/to-be-maritime-carrier.png" style="width:1000px; height:auto;" alt=""></td>

## 3.2. User Stories

En esta sección se describe la estructura y el propósito de nuestras User Stories y Epics, que formalizan los requisitos identificados a lo largo del ciclo de vida de Mushroom. El objetivo es traducir las necesidades y expectativas de los segmentos objetivos, así como los visitantes de la Landing Page y desarrolladores, en historias accionables, asegurando la satisfacción total de los usuarios finales. Cada Epic agrupa funcionalidades de alto nivel y sirve como un contenedor lógico para un conjunto de User Stories, mientras que estas últimas representan incrementos de valor independientes y verificables. Cada historia será acompañada de criterios de aceptación escritos en formato Gherkin (Given–When–Then), lo que permite una definición precisa y verificable de las condiciones para considerar un éxito.

El mapeo de Epics y User Stories seguirá las mejores prácticas de User Story Mapping, ayudándonos a "descubrir la historia completa" y a "construir el producto correcto" (Patton, 2021). Comenzaremos con un listado organizado de Epics que abarcan tanto la experiencia web, móvil y Landing Page con contenido segmentado para visitantes generales y subgrupos específicos. Luego, desglosaremos cada Epic en User Stories orientadas al usuario, y Technical Stories dirigidas al equipo de desarrollo, cubriendo tanto la interacción final como los requisitos de infraestructura.

Para garantizar la calidad y efectividad de nuestras historias, aplicaremos las recomendaciones de Stevenson (2020) sobre la redacción de User Stories y criterios de aceptación. Cada historia describirá el rol, la acción y el beneficio esperado, y sus criterios se mantendrán en tiempo presente, en tercera persona, sin referencias de interfaz, para asegurar que sean neutrales y evaluables. De esta manera, aseguramos que todo comportamiento previsto quede claramente definido y sea verificable. Cada User Story incluye criterios de aceptación que deben ser comprobables y redactados en tiempo presente, tercera persona, siguiendo la estructura de Gherkin (Given-When-Then). Además, se consideran User Stories para el sitio web estático (Landing Page) y Technical Stories para los features del RESTful API.

| **Epic / Story ID** | **Título** | **Descripción** | **Criterios de aceptación** | **Relacionado con (Epic ID)** |
|---------------------|------------|-----------------|-----------------------------|--------------------------|
| EPIC001 | Landing Page | **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** tener una página de presentación de la aplicación donde describa de forma breve sus funcionalidades, ventajas e información de contacto, **para** que podamos estar bien informados de lo que ofrece la aplicación y podamos tener contacto con personal de atención. | - | - |
| EPIC002            | Identity and Access Management | **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** registrarme, iniciar sesión, recuperar credenciales y disponer de tokens gestionados en la aplicación, **para** poder acceder a las funcionalidades de la aplicación, además de controlar accesos de mi equipo, auditar sesiones y proteger información sensible. | - | - |
| EPIC003             | Profile and Preferences | **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** crear y actualizar perfiles y preferencias (idioma, tema), **para** poder emplear las funciones de la aplicación, mantener continuidad en la gestión de envíos y mejorar la eficiencia en la toma de decisiones.              | 
| EPIC004             | Asset and Resource Management | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** disponer de un catálogo de puertos con ubicación, estado y noticias asociadas, **para** planificar escalas, decidir rutas basadas en información actualizada, y anticipar demoras y coordinar inventarios y entregas. |
| EPIC005             | A* / AI Process        | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** obtener rutas optimizadas (A* + pesos dinámicos) con justificación de los factores (tiempo, costo, riesgo, emisiones), **para** tomar decisiones operativas que minimicen coste y exposición a incidentes.       |
| EPIC006             | Service Design & Planning          | **Como** Exportadores e Importadores de Alta Rotación, **quiero** obtener estimaciones de costo y reglas comerciales vinculadas a cada ruta con cálculo de Incoterms respectivos, **para** decidir el mejor Incoterm y optimizar coste total de la cadena logística.   |
| EPIC007 | Notifications | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** recibir notificaciones in-app y por correo sobre riesgos, cambios de ruta y alertas meteorológicas, **para** reaccionar rápidamente y replanificar operaciones con mínima disrupción.
| EPIC008 | Service Operation & Monitoring | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** acceder a reportes PDF de rutas con datos relevantes como emisiones de dióxido de carbono y métricas de viaje, y ver rutas populares usadas por la comunidad, **para** justificar decisiones operativas, cumplir requerimientos regulatorios y replicar rutas eficientes.
| US-01               | Introducción llamativa en Landing Page | **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** ver una sección introductoria concisa sobre lo que es la aplicación de Mushroom, **para** obtener una primera impresión positiva y concisa. | **Escenario 1:** Introducción disponible y completa. <br><br> **Dado que** existe contenido estático publicado en la landing page relacionado a la introducción, **cuando** un visitante solicita la landing page pública desde su navegador, **entonces** la página se entrega de forma completa junto a la introdución llamativa esperada <br><br> **Escenario 2:** Introducción no disponible. <br><br> **Dado que** falta contenido en la Landing Page o se encuentra en mantenimiento por una actualización, **cuando** un visitante solicita la landing page, **entonces** se entrega una página en blanco con un mensaje de mantenimiento, explicando el motivo del porque no sale la página, y en que día y a que hora la página volvera a estar activa. | EPIC001 |
|US-02	|CTA a aplicación web desde landing page | **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** un call-to-action en la landing page que permita entrar a la aplicación web de forma directa, **para** acceder rápidamente a las funcionalidades indicadas.|	**Escenario 1:** Redirección válida <br><br> **Dado que** el CTA está publicado y la aplicación web disponible, **cuando** un visitante activa el CTA desde la Landing Page, **entonces** el navegador redirige a la aplicación web (URL pública de la aplicación). <br><br> **Escenario 2:** Aplicación web no disponible <br><br> **Dado que** la aplicación web no está disponible, **cuando** el visitante activa el CTA desde la landing page, **entonces** se muestra un mensaje rápido de indisponibilidad, junto a la hora en la que pueda estar la aplicación disponible, y no se redirige.|	EPIC001|
| US-03 | Presentación de funcionalidades principales en Landing Page |**Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** ver una sección que identifique y explique las principales funcionalidades de Mushroom, **para** analizar si el producto es útil para el contexto o caso de negocio en el que me encuentro.| **Escenario 1:** Presentación de funcionalidades disponible y completa <br><br> **Dado que** existe contenido estático publicado en la landing page relacionado a la presentación de las funcionalidades, **cuando** un visitante solicita la landing page pública desde su navegador, **entonces** la página se entrega de forma completa junto a la presentación de funcionalidades esperada <br><br> **Escenario 2:** Presentación de funcionalidades no disponible. <br><br> **Dado que** falta contenido en la Landing Page o se encuentra en mantenimiento por una actualización, **cuando** un visitante solicita la landing page, **entonces** se entrega una página en blanco con un mensaje de mantenimiento, explicando el motivo del porque no sale la página, y en que día y a que hora la página volvera a estar activa. | EPIC001 |
| US-04 | Descripción del equipo de trabajo en Landing Page |**Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** ver una sección en la que se presente al grupo de trabajo detrás de Mushroom, **para** poder tener más información sobre el grupo y tener más confianza en el proyecto. | **Escenario 1:** Presentación del equipo de Mushroom disponible y completa <br><br> **Dado que** existe contenido estático publicado en la landing page relacionado al equipo de trabajo de Mushroom, **cuando** un visitante solicita la landing page pública desde su navegador, **entonces** la página se entrega de forma completa junto a la presentación del equipo esperada <br><br> **Escenario 2:** Presentación del equipo no disponible. <br><br> **Dado que** falta contenido en la Landing Page o se encuentra en mantenimiento por una actualización, **cuando** un visitante solicita la landing page, **entonces** se entrega una página en blanco con un mensaje de mantenimiento, explicando el motivo del porque no sale la página, y en que día y a que hora la página volvera a estar activa. | EPIC001 |
| US-05 | Vídeo About-The-Product en Landing Page | **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** ver una sección con un vídeo donde se presente el funcionamiento del producto **para** poder tener una guía breve y práctica, con toda la información clave. | **Escenario 1:** Vídeo About-The-Product disponible y completo <br><br> **Dado que** el vídeo About-The-Product está publicado y presentado de forma correcta en la landing page **cuando** un visitante solicita la landing page pública desde su navegador, **entonces** la página se entrega de forma completa junto al vídeo About-The-Product en su propia sección <br><br> **Escenario 2:** Landing Page no disponible. <br><br> **Dado que** falta contenido en la Landing Page o se encuentra en mantenimiento por una actualización, **cuando** un visitante solicita la landing page, **entonces** se entrega una página en blanco con un mensaje de mantenimiento, explicando el motivo del porque no sale la página, y en que día y a que hora la página volvera a estar activa. <br><br> **Escenario 3:** Vídeo no disponible en su plataforma respectiva <br><br> **Dado que** la plataforma donde se subio el vídeo About-The-Product se encuentra caída o con problemas, o el vídeo fue retirado, **cuando** un visitante solicita la landing page e intenta revisar el vídeo, **entonces** se debe mostrar un pequeño mensaje sobre la sección del vídeo About-The-Product indicando que no está disponible y cuando podrá estar disponible nuevamente. | EPIC001 |
| US-06 | Formulario de contacto en Landing Page | **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** disponer de una sección con un formulario de contacto completo en la Landing Page, junto a una sección con distintos datos como dirección, un correo eletrónico principal y un número de teléfono **para** poder tener un medio de comunicación con el equipo de Mushroom y resolver cualquier duda que presente. | **Escenario 1:** Formulario de contacto disponible y completo <br><br> **Dado que** el formulario de contacto está presentado de forma correcta en la landing page **cuando** un visitante solicita la landing page pública desde su navegador, **entonces** la página se entrega de forma completa junto al formulario de contacto en su propia sección <br><br> **Escenario 2:** Usuario envía un mensaje de forma exitosa <br><br> **Dado que** un usuario utiliza el formulario de contacto, ingresando su nombre, correo electrónico, asunto, número de teléfono y el texto propio del mensaje, **cuando** envía el mensaje completo a través del formulario **entonces** se presenta un mensaje corto indicando que el mensaje fue enviado y el contenido se entrega al correo electrónico asignado por el equipo de Mushroom. <br><br> **Escenario 03:** Usuario envía un mensaje de forma incorrecta <br><br> **Dado que** un usuario utiliza el formulario de contacto, pero ingresa alguno de los datos necesario de forma incorrecta o lo deja en blanco **cuando** envía el mensaje completo a través del formulario **entonces** se muestra un mensaje corto y conciso donde se explica que el mensaje no se pudo enviar y que partes debe corregir el usuario. | EPIC001 |
| US-07|	Registro de usuario con verificación en la aplicación web	| **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** registrar una cuenta con un correo electrónico válido y contraseña que cumpla la política de seguridad y recibir un correo de verificación, **para** activar la cuenta y usar la plataforma con sus funcionalidades.	| **Escenario 1:** Registro válido <br><br> **Dado que** el usuario ingresó un correo electrónico válido y una contraseña que cumple la política de seguridad (contraseña con mínimo de 8 caracteres, con mínimo de 1 símbolo, una letra en minúscula y otra en mayúscula, y un número), **cuando** el usuario completé toda la información requerida en el formulario de registro y envié, **entonces** se crea la cuenta en estado "pendiente" y se envía correo de verificación para que el usuario complete el proceso. | **Escenario 2:** Validación fallida <br><br> **Dado que** el usuario ingresa una contraseña que no cumple la política de seguridad o el correo electrónico ingresado ya existe, **cuando** el usuario envía el registro, **entonces** la API rechaza la solicitud con error de validación y se explica que datos deben ser corregidos.	|EPIC002|
| US-08|	Registro de usuario con verificación en la aplicación móvil	| **Como** Empresas Navieras y Operadoras Logísticas, y Exportadores e Importadores de Alta Rotación, **quiero** registrar una cuenta con un correo electrónico válido y contraseña que cumpla la política de seguridad y recibir un correo de verificación por mi dispositivo móvil, **para** activar la cuenta y usar la plataforma con sus funcionalidades de forma portable.	| **Escenario 1:** Registro válido <br><br> **Dado que** el usuario ingresó un correo electrónico válido y una contraseña que cumple la política de seguridad (contraseña con mínimo de 8 caracteres, con mínimo de 1 símbolo, una letra en minúscula y otra en mayúscula, y un número), **cuando** el usuario completé toda la información requerida en el formulario de registro y envié, **entonces** se crea la cuenta en estado "pendiente" y se envía correo de verificación para que el usuario complete el proceso. | **Escenario 2:** Validación fallida <br><br> **Dado que** el usuario ingresa una contraseña que no cumple la política de seguridad o el correo electrónico ingresado ya existe, **cuando** el usuario envía el registro, **entonces** la API rechaza la solicitud con error de validación y se explica que datos deben ser corregidos.	|EPIC002|
| US-09	| Inicio de sesión y emisión de tokens en la aplicación web | **Como** Empresas Navieras y Operadoras Logísticas y Exportadores e Importadores de Alta Rotación, **quiero** iniciar sesión con credenciales válidas (correo electrónico y contraseña) y recibir un token de sesión con roles, **para** acceder a mis funcionalidades asignadas según mi rol. |	**Escenario 1:** Inicio de sesión exitoso <br><br> **Dado que** las credenciales ingresadas por el usuario son correctas y la cuenta está activa, **cuando** el usuario presentá los datos para que se puedan autenticar y así iniciar sesión, **entonces** la API emite un AccessToken y RefreshToken determinado, y registra la sesión para autorizar al usuario a las funcionalidades de la aplicación. <br><br> **Escenario 2:** Inicio de sesión fallido <br><br> **Dado que** las credenciales ingresadas por el usuario son incorrectas, o la cuenta no está habilitada, **cuando** el usuario intenta iniciar sesión, **entonces** se devuelve un mensaje de error indicando en que datos se detectaron los fallos o si la cuenta del usuario aún no está habilitada. |EPIC002|
| US-10	| Inicio de sesión y emisión de tokens en la aplicación móvil | **Como** Empresas Navieras y Operadoras Logísticas y Exportadores e Importadores de Alta Rotación, **quiero** iniciar sesión con credenciales válidas (correo electrónico y contraseña) y recibir un token de sesión con roles a través de mi dispositivo móvil, **para** acceder a mis funcionalidades asignadas según mi rol de forma portable. |	**Escenario 1:** Inicio de sesión exitoso por dispositivo móvil <br><br> **Dado que** las credenciales ingresadas por el usuario son correctas y la cuenta está activa, **cuando** el usuario presentá los datos para que se puedan autenticar y así iniciar sesión, **entonces** la API emite un AccessToken y RefreshToken determinado, y registra la sesión para autorizar al usuario a las funcionalidades de la aplicación. <br><br> **Escenario 2:** Inicio de sesión fallido <br><br> **Dado que** las credenciales ingresadas por el usuario son incorrectas, o la cuenta no está habilitada, **cuando** el usuario intenta iniciar sesión, **entonces** se devuelve un mensaje de error indicando en que datos se detectaron los fallos o si la cuenta del usuario aún no está habilitada. |EPIC002|
| US-11 | Listado de puertos con estado operativo	en la aplicación web | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** poder visualizar todos los puertos registrados con estado operativo junto a sus metadatos básicos (nombre, continente, lat/lon) en un listado, **para** planificar escalas de inicio a fin y validar opciones de transporte. | **Escenario 1:** Listado exitoso <br><br> **Dado que** hay puertos registrados en la base de datos y el usuario ingresó de forma adecuada en la aplicación, **cuando** se solicita la presentación de los datos una vez el usuario ingresa en la página principal, **entonces** el sistema devuelve puertos con nombre, continente, lat/lon y estado operativo, todo mostrado de forma ordenada y alfabéticamente. <br><br> **Escenario 2:** No hay datos disponibles para el listado <br><br> **Dado que** hay un fallo en la base de datos y los puertos no se pueden mostrar en el listado, **cuando** se solicita la presentación de los datos una vez el usuario ingresa en la página principal, **entonces** el sistema devuelve una lista vacía junto a un error explicando que no se pudieron obtener los datos de la base de datos, además se registra un log de fallo.|EPIC004|
| US-12 | Listado de puertos con estado operativo	en la aplicación móvil | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** poder visualizar todos los puertos registrados con estado operativo junto a sus metadatos básicos (nombre, continente, lat/lon) en un listado en mi dispositivo móvil, **para** planificar escalas de inicio a fin y validar opciones de transporte de portable. | **Escenario 1:** Listado exitoso <br><br> **Dado que** hay puertos registrados en la base de datos y el usuario ingresó de forma adecuada en la aplicación, **cuando** se solicita la presentación de los datos una vez el usuario ingresa en la página principal, **entonces** el sistema devuelve puertos con nombre, continente, lat/lon y estado operativo, todo mostrado en un mapa interactivo. <br><br> **Escenario 2:** No hay datos disponibles para el listado <br><br> **Dado que** hay un fallo en la base de datos y los puertos no se pueden mostrar en el listado, **cuando** se solicita la presentación de los datos una vez el usuario ingresa en la página principal, **entonces** el sistema devuelve una lista vacía junto a un error explicando que no se pudieron obtener los datos de la base de datos, además se registra un log de fallo.|EPIC004|
| US-13 | Mapa interactivo en la aplicación web | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** poder visualizar todos los puertos registrados con estado operativo dentro de un mapa interactivo de todo el mundo, **para** poder tener una guía realista y dinámica | **Escenario 1:** Mapa cargado correctamente <br><br> **Dado que** el mapa interactivo está cargado de forma adecuada en la aplicación web y el usuario ingresó de forma adecuada en la aplicación, **cuando** se solicita la presentación de los datos una vez el usuario ingresa en la página principal, **entonces** el sistema devuelve puertos organizados correctamente en el mapa interactivo en base a su latitud y longitud <br><br> **Escenario 2:** Mapa sin cargar o no disponible <br><br> **Dado que** el mapa interactivo no se encuentra disponible para la aplicación, **cuando** se solicita la presentación de los datos una vez el usuario ingresa en la página principal, **entonces** el sistema devuelve una sección en blanco en donde debería estar el mapa y se indica que no se encuentra disponible, pero aún se debe mostrar la lista de puertos. |EPIC004|
| US-14 | Mapa interactivo en la aplicación móvil | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** poder visualizar todos los puertos registrados con estado operativo dentro de un mapa interactivo de todo el mundo en el dispositivo móvil, **para** poder tener una guía realista, dinámica y portable | **Escenario 1:** Mapa cargado correctamente <br><br> **Dado que** el mapa interactivo está cargado de forma adecuada en la aplicación web y el usuario ingresó de forma adecuada en la aplicación, **cuando** se solicita la presentación de los datos una vez el usuario ingresa en la página principal, **entonces** el sistema devuelve puertos organizados correctamente en el mapa interactivo en base a su latitud y longitud <br><br> **Escenario 2:** Mapa sin cargar o no disponible <br><br> **Dado que** el mapa interactivo no se encuentra disponible para la aplicación, **cuando** se solicita la presentación de los datos una vez el usuario ingresa en la página principal, **entonces** el sistema devuelve una sección en blanco en donde debería estar el mapa y se indica que no se encuentra disponible, pero aún se debe mostrar la lista de puertos. |EPIC004|
| US-15 |	Selección válida de puerto origen y destino	en aplicación web | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** buscar y seleccionar puertos origen y destino válidos en el mapa interactivo o en el listado **para** iniciar un cálculo de rutas que sean mejores, validando que pertenezcan al grafo y no sean iguales. | **Escenario 1:** Selección válida de puertos <br><br> **Dado que** ambos puertos existen en el grafo de la base de datos y son distintos, **cuando** el usuario selecciona el puerto de origen y destino, **entonces** el sistema acepta la selección y permite calcular la mejor ruta directamente. <br><br> **Escenario 2:** Selección de puertos inválida <br><br> **Dado que** uno de los puertos no pertenece al grafo o ambos son iguales, **cuando** el usuario intenta seleccionar, **entonces** el sistema rechaza la selección y explica el motivo del error.|	EPIC004|
| US-16 |	Selección válida de puerto origen y destino	en aplicación móvil | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** buscar y seleccionar puertos origen y destino válidos en el mapa interactivo o en el listado en mi dispositivo móvil **para** iniciar un cálculo de rutas que sean mejores, validando que pertenezcan al grafo y no sean iguales. | **Escenario 1:** Selección válida de puertos <br><br> **Dado que** ambos puertos existen en el grafo de la base de datos y son distintos, **cuando** el usuario selecciona el puerto de origen y destino, **entonces** el sistema acepta la selección y permite calcular la mejor ruta directamente. <br><br> **Escenario 2:** Selección de puertos inválida <br><br> **Dado que** uno de los puertos no pertenece al grafo o ambos son iguales, **cuando** el usuario intenta seleccionar, **entonces** el sistema rechaza la selección y explica el motivo del error.|	EPIC004|
| US-17 |	Rechazo automático de puerto de llegada no apto en aplicación web	| **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema consulte restricciones del puerto y rechace inclusión de un puerto de llegada con estado no apto (cerrado) con breve justificación, **para** evitar planificaciones incorrectas que puedan ocasionar pérdida de tiempo.	| **Escenario 1:** Detección de puerto no apto <br><br> **Dado que** el puerto destino que seleccionó el usuario tiene estado "cerrado", **cuando** se intenta usar como punto de llegada, **entonces** el sistema rechaza la selección y devuelve una breve justificación con la razón de que el puerto este cerrado. <br><br> **Escenario 2:** Puerto apto <br><br> **Dado que** el puerto seleccionado por el usuario está operativo, **cuando** se intenta usar como punto de llegada, **entonces** el sistema permite la selección y comienza a buscar la mejor ruta posible.|EPIC004|
| US-18 |	Rechazo automático de puerto de llegada no apto en aplicación móvil	| **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema consulte restricciones del puerto y rechace inclusión de un puerto de llegada con estado no apto (cerrado) con breve justificación en mi dispositivo móvil, **para** evitar planificaciones incorrectas que puedan ocasionar pérdida de tiempo de forma portable.	| **Escenario 1:** Detección de puerto no apto <br><br> **Dado que** el puerto destino que seleccionó el usuario tiene estado "cerrado", **cuando** se intenta usar como punto de llegada, **entonces** el sistema rechaza la selección y devuelve una breve justificación con la razón de que el puerto este cerrado. <br><br> **Escenario 2:** Puerto apto <br><br> **Dado que** el puerto seleccionado por el usuario está operativo, **cuando** se intenta usar como punto de llegada, **entonces** el sistema permite la selección y comienza a buscar la mejor ruta posible.|EPIC004|
|US-19 |	Ficha de puerto desde mapa en la aplicación web |	**Como** Empresas Navieras y Operadoras Logísticas, **quiero** consultar la ficha de datos de un puerto desde el mapa interactivo, devolviendo nombre, continente y estado operativo, **para** evaluar su idoneidad de forma rápida y dinámica.	| **Escenario 1:** Ficha de puerto encontrada <br><br> **Dado que** el puerto existe en la base de datos, **cuando** se solicita la ficha de este por parte del usuario, **entonces** el sistema devuelve un pequeño bloque de texto con nombre, continente y estado. <br><br> **Escenario 2:** Puerto inexistente o con datos no disponibles <br><br> **Dado que** el puerto no existe o no está disponible en la base de datos, **cuando** el usuario solicita la ficha del puerto mediante el mapa interactivo, **entonces** el sistema devuelve un error de que no se pudo encontrar la información y le pide al usuario que intente de nuevo más tarde. |	EPIC004|
|US-20 |	Ficha de puerto desde mapa en la aplicación móvil |	**Como** Empresas Navieras y Operadoras Logísticas, **quiero** consultar la ficha de datos de un puerto desde el mapa interactivo, devolviendo nombre, continente y estado operativo en mi dispositivo móvil, **para** evaluar su idoneidad de forma rápida, portable y dinámica.	| **Escenario 1:** Ficha de puerto encontrada <br><br> **Dado que** el puerto existe en la base de datos, **cuando** se solicita la ficha de este por parte del usuario, **entonces** el sistema devuelve un pequeño bloque de texto con nombre, continente y estado. <br><br> **Escenario 2:** Puerto inexistente o con datos no disponibles <br><br> **Dado que** el puerto no existe o no está disponible en la base de datos, **cuando** el usuario solicita la ficha del puerto mediante el mapa interactivo, **entonces** el sistema devuelve un error de que no se pudo encontrar la información y le pide al usuario que intente de nuevo más tarde. |	EPIC004|
| US-21 |Cálculo de ruta optimizada multi-criterio por aplicación web|	**Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema calcule la ruta optimizada entre dos puertos minimizando distancia y puntaje de riesgo (que la prioridad sea la distancia mínima con menor riesgo) y devuelva nodos, distancia total y ETA, **para** seleccionar la mejor opción operativa.	| **Escenario 1:** Cálculo exitoso <br><br> **Dado que** el puerto de origen y destino son válidos y los datos de las aristas entre nodos están actualizados, **cuando** el usuario solicita un cálculo de ruta optimizada, **entonces** el sistema devuelve una pantalla de detalles con distancia total (en millas naúticas) y ETA, y ruta óptima se muestra en el mapa interactivo con los nodos. <br><br>
**Escenario 2:** Datos insuficientes para la ruta <br><br> Dado que faltan datos de los puertos o las aristas por un fallo en la base de datos, **cuando** se solicita cálculo de la ruta óptima, entonces el sistema devuelve error en la obtención de datos y se le indica al usuario que vuelva a intentarlo más tarde.	|EPIC005|
| US-22 |Cálculo de ruta optimizada multi-criterio por aplicación móvil|	**Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema calcule la ruta optimizada entre dos puertos minimizando distancia y puntaje de riesgo (que la prioridad sea la distancia mínima con menor riesgo) y devuelva nodos, distancia total y ETA a través de mi dispositivo móvil, **para** seleccionar la mejor opción operativa de forma portable.	| **Escenario 1:** Cálculo exitoso <br><br> **Dado que** el puerto de origen y destino son válidos y los datos de las aristas entre nodos están actualizados, **cuando** el usuario solicita un cálculo de ruta optimizada, **entonces** el sistema devuelve una pantalla de detalles con distancia total (en millas naúticas) y ETA, y ruta óptima se muestra en el mapa interactivo con los nodos. <br><br> **Escenario 2:** Datos insuficientes para la ruta <br><br> Dado que faltan datos de los puertos o las aristas por un fallo en la base de datos, **cuando** se solicita cálculo de la ruta óptima, **entonces** el sistema devuelve error en la obtención de datos y se le indica al usuario que vuelva a intentarlo más tarde.	|EPIC005|
|US-23|	Desglose de métricas de ruta en aplicacion web| **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que junto a la ruta calculada entre dos puertos seleccionados se presente distancia total, tiempo estimado y posible riesgo, **para** evaluar impacto operativo en una ruta y buscar más rutas de ser posible.|	**Escenario 1:** Desglose de información disponible <br><br> **Dado que** la ruta está calculada entre dos puertos seleccionados por el usuario, **cuando** el sistema entrega la mejor ruta calculada, **entonces** incluye distancia, tiempo estimado y score de riesgo asignado para toda la ruta en un detalle bajo el mapa interactivo. <br><br> **Escenario 2:** Riesgo no estimado <br><br> **Dado** que no hay datos de riesgo disponibles o que no se puede conseguir de una API externa, **cuando** se intenta entregar la ruta calculada entre dos puertos, **entonces** el campo de riesgo no se muestra y se le indica al usuario que no se pudo considerar el riesgo en el cálculo y que no se puede determinar una mejor ruta. <br><br> **Escenario 3:** Tiempo no estimado <br><br> **Dado** que no hay datos de tiempo disponibles en las aristas, **cuando** se intenta entregar la ruta calculada entre dos puertos, **entonces** el campo de tiempo no se muestra y se le indica al usuario que no se pudo considerar el tiempo en el cálculo y que no se puede determinar una mejor ruta.	|EPIC005|
|US-24|	Desglose de métricas de ruta en aplicacion móvil| **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que junto a la ruta calculada entre dos puertos seleccionados se presente distancia total, tiempo estimado y posible riesgo en mi dispositivo móvil, **para** evaluar impacto operativo en una ruta y buscar más rutas de ser posible de forma portable.|	**Escenario 1:** Desglose de información disponible <br><br> **Dado que** la ruta está calculada entre dos puertos seleccionados por el usuario, **cuando** el sistema entrega la mejor ruta calculada, **entonces** incluye distancia, tiempo estimado y score de riesgo asignado para toda la ruta en un detalle bajo el mapa interactivo. <br><br> **Escenario 2:** Riesgo no estimado <br><br> **Dado** que no hay datos de riesgo disponibles o que no se puede conseguir de una API externa, **cuando** se intenta entregar la ruta calculada entre dos puertos, **entonces** el campo de riesgo no se muestra y se le indica al usuario que no se pudo considerar el riesgo en el cálculo y que no se puede determinar una mejor ruta. <br><br> **Escenario 3:** Tiempo no estimado <br><br> **Dado** que no hay datos de tiempo disponibles en las aristas, **cuando** se intenta entregar la ruta calculada entre dos puertos, **entonces** el campo de tiempo no se muestra y se le indica al usuario que no se pudo considerar el tiempo en el cálculo y que no se puede determinar una mejor ruta.	|EPIC005|
| US-25 |	Top-3 alternativas priorizando distancia y riesgo en aplicación web |	**Como** Empresas Navieras y Operadoras Logísticas, **quiero** recibir las top-3 alternativas evaluadas por el modelo AI priorizando menor distancia y menor riesgo y con métricas comparativas, **para** comparar opciones de forma eficaz y comprensible.	| **Escenario 1:** Alternativas completas <br><br>
**Dado que** el usuario está autenticado en la aplicación y procede a buscar la mejor ruta de un puerto de inicio a uno de llegada, **cuando** se realiza el cálculo de rutas y se solicita alternativas, **entonces** el sistema devuelve tres rutas ordenadas por score combinado con valores de ETA, distancia, riesgo. | **Escenario 2:** Opciones insuficientes <br><br>
**Dado que** el usuario está autenticado en la aplicación y procede a buscar la mejor ruta de un puerto de inicio a uno de llegada y el sistema no puede generar 3 alternativas distintas por falta de datos o falta de posibles opciones, **cuando** se solicita alternativas de una ruta, **entonces** el sistema devuelve las alternativas disponibles (no todas) y una nota explicativa del porque no fue posible conseguir otra alternativa.|	EPIC005|
| US-26 |	Top-3 alternativas priorizando distancia y riesgo en aplicación móvil |	**Como** Empresas Navieras y Operadoras Logísticas, **quiero** recibir las top-3 alternativas evaluadas por el modelo AI priorizando menor distancia y menor riesgo y con métricas comparativas en el dispositivo móvil, **para** comparar opciones de forma eficaz, portable y comprensible.	| **Escenario 1:** Alternativas completas <br><br>
**Dado que** el usuario está autenticado en la aplicación y procede a buscar la mejor ruta de un puerto de inicio a uno de llegada, **cuando** se realiza el cálculo de rutas y se solicita alternativas, **entonces** el sistema devuelve tres rutas ordenadas por score combinado con valores de ETA, distancia, riesgo. | **Escenario 2:** Opciones insuficientes <br><br>
**Dado que** el usuario está autenticado en la aplicación y procede a buscar la mejor ruta de un puerto de inicio a uno de llegada y el sistema no puede generar 3 alternativas distintas por falta de datos o falta de posibles opciones, **cuando** se solicita alternativas de una ruta, **entonces** el sistema devuelve las alternativas disponibles (no todas) y una nota explicativa del porque no fue posible conseguir otra alternativa.|	EPIC005|
| US-27 |	Justificación cuantitativa de elección en aplicación web |	**Como** Empresas Navieras y Operadoras Logísticas, **quiero** solicitar una justificación cuantitativa de por qué una ruta fue elegida frente a otra y recibir valores numéricos totales, **para** documentar la decisión de forma adecuada.	| **Escenario 1:** Justificación disponible para las rutas mostradas <br><br> **Dado que** existen dos rutas comparables entre dos puertos distintos, **cuando** el usuario realiza el cálculo de la mejor ruta posible, **entonces** el sistema devuelve diferencias numéricas (distancia, ETA, riesgo) y un texto de justificación que impulsó la elección. <br><br> **Escenario 2:** Fallo durante la justificación de rutas <br><br> **Dado que** l sistema no puede justificar la selección entre distintas rutas por un error en la base de datos y la conexión con los datos de cada arista y puerto, **cuando** el usuario realiza el cálculo de la mejor ruta entre un puerto de inicio y llegada, **entonces** el sistema devuelve un mensaje explicativo para el problema y los datos disponibles de cada ruta.	|EPIC005|
| US-28 |	Justificación cuantitativa de elección en aplicación móvil |	**Como** Empresas Navieras y Operadoras Logísticas, **quiero** solicitar una justificación cuantitativa de por qué una ruta fue elegida frente a otra y recibir valores numéricos totales en mi dispositivo móvil, **para** documentar la decisión de forma adecuada y portable.	| **Escenario 1:** Justificación disponible para las rutas mostradas <br><br> **Dado que** existen dos rutas comparables entre dos puertos distintos, **cuando** el usuario realiza el cálculo de la mejor ruta posible, **entonces** el sistema devuelve diferencias numéricas (distancia, ETA, riesgo) y un texto de justificación que impulsó la elección. <br><br> **Escenario 2:** Fallo durante la justificación de rutas <br><br> **Dado que** l sistema no puede justificar la selección entre distintas rutas por un error en la base de datos y la conexión con los datos de cada arista y puerto, **cuando** el usuario realiza el cálculo de la mejor ruta entre un puerto de inicio y llegada, **entonces** el sistema devuelve un mensaje explicativo para el problema y los datos disponibles de cada ruta.	|EPIC005|
| US-29 |	Recalculo automático ante eventos externos en la aplicación web | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema detecte eventos externos (cierres de puerto, incidentes climáticos y oceanográficos) y recalcule automáticamente la ruta activa cuando su viabilidad cambie, registrando la nueva ruta y diferencias métricas, **para** reaccionar en tiempo real ante cualquier obstáculo presente. | **Escenario 1:** Se detecta un evento que impacta una alternativa posible para una ruta <br><br> **Dado que** llega un evento que impacta a un nodo o arista del grafo establecido, **cuando** el usuario pide el cálculo de ruta entre dos puertos activos y el sistema evalúa impacto y la ruta deja de ser viable, **entonces** recalcula y persiste una nueva sugerencia con métricas de comparación. <br><br> **Escenario 2:** Evento detectado pero no impacta ninguna alternativa de ruta <br><br> **Dado que** el evento no impacta la viabilidad de la ruta que consulta el usuario entre dos puertos, **cuando** el usuario pide la consulta de la ruta con sus métricas, **entonces** se muestran todas las alternativas posibles sin algún problema por el evento detecto y se realiza la justificación al igual que siempre. <br><br> **Escenario 3:** Evento detectado pero e impacta todas las alternativas posibles <br><br> **Dado que** el evento detectado llega a impactar cada una de las alternativas posibles del puerto de salida al puerto de llegada pedido por el usuario, **cuando** el usuario pide la consulta de la ruta con sus métricas, **entonces** el sistema indica que no se pudieron conseguir rutas posibles debido a que el evento no lo permite y se recomienda al usuario que no pase por algún área cercana al evento registrado y que espere a nuevas actualizaciones del evento.	|EPIC005|
|US-30 |	Recalculo automático ante eventos externos en la aplicación móvil | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema detecte eventos externos (cierres de puerto, incidentes climáticos y oceanográficos) y recalcule automáticamente la ruta activa cuando su viabilidad cambie, registrando la nueva ruta y diferencias métricas en mi dispositivo móvil, **para** reaccionar en tiempo real ante cualquier obstáculo presente de forma portable. | **Escenario 1:** Se detecta un evento que impacta una alternativa posible para una ruta <br><br> **Dado que** llega un evento que impacta a un nodo o arista del grafo establecido, **cuando** el usuario pide el cálculo de ruta entre dos puertos activos y el sistema evalúa impacto y la ruta deja de ser viable, **entonces** recalcula y persiste una nueva sugerencia con métricas de comparación. <br><br> **Escenario 2:** Evento detectado pero no impacta ninguna alternativa de ruta <br><br> **Dado que** el evento no impacta la viabilidad de la ruta que consulta el usuario entre dos puertos, **cuando** el usuario pide la consulta de la ruta con sus métricas, **entonces** se muestran todas las alternativas posibles sin algún problema por el evento detecto y se realiza la justificación al igual que siempre. <br><br> **Escenario 3:** Evento detectado pero e impacta todas las alternativas posibles <br><br> **Dado que** el evento detectado llega a impactar cada una de las alternativas posibles del puerto de salida al puerto de llegada pedido por el usuario, **cuando** el usuario pide la consulta de la ruta con sus métricas, **entonces** el sistema indica que no se pudieron conseguir rutas posibles debido a que el evento no lo permite y se recomienda al usuario que no pase por algún área cercana al evento registrado y que espere a nuevas actualizaciones del evento.	|EPIC005|
| US-31 |	Visualización geométrica y animación de rutas en aplicación web	| **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema visualice la geometría de la ruta y proporcione identificadores de tramo para renderizar rutas con animación, **para** entender como será el camino del trayecto y los tiempos estimados.	| **Escenario 1:** GeoJSON disponible <br><br> **Dado que** la ruta contiene geometría directa con nodos y aristas identificables, **cuando** se realiza el cálculo de la ruta entre el puerto de inicio y de llegada, **entonces** el sistema entrega un GeoJSON junto al cálculo de la ruta, donde el GeoJSON tiene tramos identificados y tiempos por tramo junto a una animación simple entre todos los nodos. <br><br> **Escenario 2:** Geometría ausente <br><br> **Dado que** la ruta no contiene geometría directa con nodos y aristas identificables por un problema de la base de datos, **cuando** se realiza el cálculo de la ruta entre el puerto de inicio y de llegada, **entonces** el sistema no entrega el GeoJSON completo con la ruta con todos los nodos y aristas involucrados, indicando que hubo un error en la obtención, pero aún se debe mostrar el listado de los puertos, la descripción de la mejor ruta y las rutas alternativas en el detalle.|	EPIC005|
| US-32 |	Visualización geométrica y animación de rutas en aplicación móvil | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema visualice la geometría de la ruta y proporcione identificadores de tramo para renderizar rutas con animación en mi dispositivo móvil, **para** entender como será el camino del trayecto y los tiempos estimados de forma portable.	| **Escenario 1:** GeoJSON disponible <br><br> **Dado que** la ruta contiene geometría directa con nodos y aristas identificables, **cuando** se realiza el cálculo de la ruta entre el puerto de inicio y de llegada, **entonces** el sistema entrega un GeoJSON junto al cálculo de la ruta, donde el GeoJSON tiene tramos identificados y tiempos por tramo junto a una animación simple entre todos los nodos. <br><br> **Escenario 2:** Geometría ausente <br><br> **Dado que** la ruta no contiene geometría directa con nodos y aristas identificables por un problema de la base de datos, **cuando** se realiza el cálculo de la ruta entre el puerto de inicio y de llegada, **entonces** el sistema no entrega el GeoJSON completo con la ruta con todos los nodos y aristas involucrados, indicando que hubo un error en la obtención, pero aún se debe mostrar el listado de los puertos, la descripción de la mejor ruta y las rutas alternativas en el detalle.|	EPIC005|
| US-33 |	Ingestión de pronósticos y mapeo a aristas en aplicación web | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema ingiera pronósticos meteorológicos y oceanográficos y los mapée a las aristas del grafo marcando su validez, **para** que el forecast más reciente afecte los datos de tiempo y de riesgo.	| **Escenario 1:** Forecast procesado correctamente <br><br> **Dado que** se han procesado pronósticos válidos en el sistema a través de APIs externas, **cuando** el sistema procesa el feed de forma adecuada para el grafo, **entonces** las aristas relevantes se actualizan con los datos obtenidos del forecast y se tomaran en cuenta en futuros cálculos de ruta por parte del usuario. <br><br> **Escenario 2:** Feed no disponible para el sistema <br><br> **Dado que** el feed obtenido está corrupto o con esquema diferente, lo que provoca que no esté disponible, **cuando** el sistema trata de procesar el feed sin éxito, **entonces** se registra un error y se informa al usuario que por ahora no puede acceder a información externa con respecto a datos oceanográficos o metereológicos.|	EPIC005|
| US-34 |	Ingestión de pronósticos y mapeo a aristas en aplicación móvil | **Como** Empresas Navieras y Operadoras Logísticas, **quiero** que el sistema ingiera pronósticos meteorológicos y oceanográficos y los mapée a las aristas del grafo marcando su validez a través de mi dispositivo móvil, **para** que el forecast más reciente afecte los datos de tiempo y de riesgo de forma portable.	| **Escenario 1:** Forecast procesado correctamente <br><br> **Dado que** se han procesado pronósticos válidos en el sistema a través de APIs externas, **cuando** el sistema procesa el feed de forma adecuada para el grafo, **entonces** las aristas relevantes se actualizan con los datos obtenidos del forecast y se tomaran en cuenta en futuros cálculos de ruta por parte del usuario. <br><br> **Escenario 2:** Feed no disponible para el sistema <br><br> **Dado que** el feed obtenido está corrupto o con esquema diferente, lo que provoca que no esté disponible, **cuando** el sistema trata de procesar el feed sin éxito, **entonces** se registra un error y se informa al usuario que por ahora no puede acceder a información externa con respecto a datos oceanográficos o metereológicos.|	EPIC005|
| US-35 |	Estimación de coste e Incoterm recomendado	| **Como** Exportadores e Importadores de Alta Rotación, **quiero** que el sistema calcule el coste estimado completo (flete, seguro) y recomiende Incoterm al proporcionar parámetros (peso, valor, preferencia, origen/destino), **para** decidir condiciones comerciales óptimas.|	**Escenario 1:** Estimación completa
**Dado que** el usuario ingresa parámetros completos, Cuando solicita estimación, Entonces el sistema devuelve desglose de flete, seguros, total y recomendación de Incoterm.

Escenario 2: Parámetros incompletos
Dado que faltan parámetros obligatorios, Cuando solicita estimación, Entonces el sistema devuelve error de validación.	EPIC006
TS-16	Servicio de pricing y reglas comerciales (Incoterms)	Como servicio técnico, quiere componente que calcule PriceEstimate y aplique reglas comerciales para recomendar Incoterm, para entregar desglose y lógica auditada.	Escenario 1: Cálculo OK
Dado que los parámetros son válidos, Cuando se POST /api/pricing/calc, Entonces la API devuelve breakdown y incoterm_recommendation.

Escenario 2: Datos insuficientes
Dado que reglas no aplican o falta data, Cuando se solicita, Entonces devuelve 422 con motivo.	EPIC006
US-17	Preferencias de notificaciones por usuario	Como Empresas Navieras y Operadoras Logísticas, quiero configurar preferencias de notificación (tipos y canales) y que se apliquen a entregas, para recibir alertas relevantes según rol.	Escenario 1: Preferencias aplicadas
Dado que el usuario establece preferencias, Cuando llega un evento relevante, Entonces las notificaciones se envían según preferencias (in-app/email).

Escenario 2: Sin preferencias
Dado que no hay preferencias configuradas, Cuando llega un evento, Entonces se aplica configuración por defecto y notifica al usuario.	EPIC007
TS-17	Servicio de notificaciones y canales	Como servicio técnico, quiere componentes para encolar y entregar notificaciones (in-app, email) respetando preferencias, para asegurar entrega coherente.	Escenario 1: Envío por canal activo
Dado que existe preferencia tipo=email y canal activo, Cuando se encola notificación, Entonces el sistema envía email y marca estado enviado.

Escenario 2: Canal inactivo
Dado que el canal está inactivo, Cuando se intenta enviar, Entonces la notificación queda en cola y se marca como pendiente.	EPIC007
US-18	Almacenamiento automático del último viaje	Como Empresas Navieras y Operadoras Logísticas, quiero que el sistema almacene automáticamente el último viaje con metadatos (nombre, tiempo inicio/fin, ruta, distancia, emisiones) para futura consulta, para mantener trazabilidad.	Escenario 1: Persistencia al completar viaje
Dado que una ruta se marca como completada, Cuando termina el viaje, Entonces el sistema persiste un registro de viaje con campos requeridos.

Escenario 2: Error de persistencia
Dado que hubo error en persistencia, Cuando termina el viaje, Entonces el sistema mantiene intento de reintento y registra fallo en logs.	EPIC008
TS-18	API: persistencia de historial de viajes	Como componente técnico, quiere endpoint que reciba y persista registros de viajes finalizados, para mantener historial consultable.	Escenario 1: Registro creado
Dado que se POST /api/trips with payload completo, Cuando la API recibe request, Entonces persiste registro y devuelve 201.

Escenario 2: Payload inválido
Dado que payload inválido, Cuando se POST, Entonces la API devuelve 400 con detalle.	EPIC008
US-19	Generación de reportes descargables (PDF/CSV)	Como Empresas Navieras y Operadoras Logísticas, quiero generar y descargar reportes de cada viaje (PDF/CSV) que muestren inicio, fin, ruta, distancia y emisiones, para evidenciar decisiones y cumplir requerimientos.	Escenario 1: Reporte generado
Dado que existe registro de viaje, Cuando el usuario solicita reporte, Entonces el sistema genera PDF/CSV con todos los campos requeridos y entrega archivo.

Escenario 2: Error en generación
Dado que el servicio de generación falla, Cuando se solicita reporte, Entonces el sistema devuelve error y cola reintento o notifica incapacidad.	EPIC008
TS-19	Servicio de generación de documentos (PDF/CSV)	Como servicio técnico, quiere componente que genere PDFs y CSVs desde registros de viaje, para descargar reportes estandarizados.	Escenario 1: Template correcto
Dado que la plantilla está disponible, Cuando se GET /api/trips/{id}/report?format=pdf, Entonces el servicio devuelve PDF con datos y 200.

Escenario 2: Plantilla corrupta
Dado que plantilla corrupta, Cuando se solicita, Entonces devuelve 500 e informa.	EPIC008
US-20	Historial de rutas con filtros y paginación	Como Empresas Navieras y Operadoras Logísticas, quiero consultar historial de rutas con filtros por fecha, origen y destino y paginar resultados, para analizar actividad pasada a gran escala.	Escenario 1: Consulta válida
Dado que el usuario aplica filtros válidos, Cuando solicita historial, Entonces el sistema devuelve página con resultados que cumplen filtros.

Escenario 2: Parámetros inválidos
Dado que los filtros son inválidos o la página solicitada excede rango, Cuando solicita historial, Entonces el sistema devuelve 400 o página vacía.	EPIC008
TS-20	API historial: filtros y paginación	Como servicio técnico, quiere endpoint /api/trips que soporte filtros por fecha/origen/destino y paginación, para consultas eficientes.	Escenario 1: Paginación con resultados
Dado que existen registros, Cuando se GET /api/trips?from=...&to=...&page=1, Entonces la API devuelve paginación y total_count.

Escenario 2: Fecha inválida
Dado que el parámetro fecha es inválido, Cuando se solicita, Entonces la API devuelve 400.	EPIC008
US-21	Rutas más buscadas (popularidad)	Como Empresas Navieras y Operadoras Logísticas, quiero acceder a una funcionalidad de "Rutas más buscadas" que agregue y devuelva rutas más consultadas en un período configurable, filtrable por continente o puerto, para aprovechar rutas comunes y eficientes.	Escenario 1: Ranking disponible
Dado que existen consultas históricas, When se solicita ranking con periodo y filtro, Entonces el sistema devuelve lista ordenada de rutas populares con conteo.

Escenario 2: Sin datos suficientes
Dado que no hay datos suficientes para el periodo, When se solicita ranking, Entonces el sistema devuelve vacío o un mensaje informativo.	EPIC008
TS-21	Servicio de métricas de uso y agregación	Como equipo técnico, quiere job que agregue consultas y genere ranking de rutas en DB, para exponer API de "popular routes".	Escenario 1: Job ejecutado
Dado que hay logs de consultas, Cuando corre job diario, Entonces se actualiza tabla de popular_routes.

Escenario 2: Job falla
Dado que el job falla, Cuando se ejecuta, Entonces se registra error y se mantiene snapshot anterior.	EPIC008

| | | | | |
|-|-|-|-|-|
| TS-01|	Manejo del formulario de contacto|	**Como** desarrollador, **quiero** un sistema que reciba los mensajes de contacto dados por los usuarios a través de la Landing Page, **para** poder revisar cada uno de los mensajes dados por nuestros usuarios y resolver cualquier duda o petición que tengan. | **Escenario 1:** Mensajes recibidos correctamente <br><br> **Dado que** el usuario se encuentra escribiendo un mensaje a través del formulario de contacto de la Landing Page, **cuando** el mensaje sea enviado y procesado sin que el usuario cometa errores con los datos pedidos, **entonces** el mensaje es enviado directamente al correo electrónico seleccionado por el equipo de Mushroom. <br><br> **Escenario 2:** Mensaje que no se pudo recibir <br><br> **Dado que** el usuario se encuentra escribiendo un mensaje a través del formulario de contacto de la Landing Page y no el correo se encuentra inactivo, suspendido o bloqueado, **cuando** el mensaje sea enviado y procesado sin que el usuario cometa errores con los datos pedidos, **entonces** se debe guardar como texto y enviar por SMS al teléfono indicado por el equipo de Mushroom, además de indicar por SMS que el mensaje no ha podido llegar al correo electrónico. | EPIC001 |
| TS-02 | Registro y verificación con API | **Como** desarrollador, **quiero** un endpoint REST para crear usuarios y emitir token de verificación, **para** soportar el flujo de registro y activación por correo. | **Escenario 1:** Registro creado por el usuario <br><br> **Dado que** el usuario ingresó un correo electrónico válido y una contraseña que cumple la política de seguridad (contraseña con mínimo de 8 caracteres, con mínimo de 1 símbolo, una letra en minúscula y otra en mayúscula, y un número), **cuando** se realiza una operación POST para el registro de la cuenta, **entonces** la API persiste al usuario en la base de datos asignada y envía un token por correo para la verificación. <br><br> **Escenario 2:** Registro rechazado <br><br> **Dado que** los datos ingresados por el usuario son inválidos, ya sea porque la contraseña no respeta la política de seguridad o el correo electrónico ya existe en la base de datos, **cuando** se realiza una operación POST para el registro de la cuenta, **entonces** la API responde con un rechazó de la petición y también envía una explicación breve de porque la petición fue rechazada junto al código respectivo.
|TS-04	API Auth: tokens y roles	Como equipo técnico, quiere endpoints /auth/login y /auth/refresh que emitan y renueven tokens con claims de rol, para gestionar autenticación segura.	Escenario 1: Emisión de tokens
Dado que credenciales válidas, Cuando se POST /auth/login, Entonces la API devuelve AccessToken (exp corto) y RefreshToken (exp largo) con claims de rol.

TS-05	API Puertos: CRUD y estado operativo	Como equipo técnico, quiere endpoints REST para obtener y filtrar puertos con su estado, para que clientes consulten catálogo actualizado.	Escenario 1: GET /api/ports OK
Dado que existen puertos en DB, Cuando se GET /api/ports, Entonces la API devuelve colección paginada con metadatos y 200.

Escenario 2: Filtro inválido
Dado que el request incluye filtros inválidos, Cuando se GET /api/ports?filter=..., Entonces la API responde 400 con detalle.	EPIC004

Escenario 2: Refresh inválido
Dado que el refresh token es inválido o expirado, Cuando se POST /auth/refresh, Entonces la API devuelve 401.	EPIC002
(No hay historias mapeadas directamente a EPIC003 — Profile & Preferences)				EPIC003

TS-06	API: validación de nodos en el grafo	Como servicio técnico, quiere un endpoint para validar que puertos estén presentes en el grafo de navegación, para prevenir cálculos con nodos inválidos.	Escenario 1: Nodos válidos
Dado que los IDs de puerto existen en el grafo, Cuando se POST /api/graph/validate {origen,destino}, Entonces la API responde valid: true.

Escenario 2: Nodo inválido
Dado que algún ID no existe, Cuando se POST /api/graph/validate, Entonces la API responde valid: false y detalle del error.	EPIC004

**TS-07	API: consulta de restricciones operativas de puerto	Como servicio técnico, quiere endpoint para obtener restricciones actuales del puerto, para validar operaciones en tiempo real.	Escenario 1: Restricciones retornadas
Dado que existen restricciones registradas, Cuando se GET /api/ports/{id}/restrictions, Entonces la API devuelve lista y estado.

Escenario 2: Sin restricciones
Dado que no hay restricciones, Cuando se consulta, Entonces la API devuelve vacío.	EPIC004

TS-08	Endpoint ficha de puerto	Como servicio técnico, quiere endpoint /api/ports/{id}/summary que devuelva metadatos y restricciones, para alimentar mapa y ficha.	Escenario 1: Resumen devuelto
Dado que el puerto tiene metadatos, Cuando se GET /api/ports/{id}/summary, Entonces la API devuelve JSON con campos requeridos.

Escenario 2: ID inválido
Dado que ID inválido, Cuando se solicita, Entonces la API devuelve 404.	EPIC004

TS-09	Motor A*/AI: servicio de cálculo de rutas	Como componente técnico, quiere exponer endpoint de cálculo de rutas que combine A* y pesos dinámicos de ML, para devolver top-3 rutas con métricas.	Escenario 1: Top-3 generadas
Dado que los modelos y grafo están disponibles, Cuando se POST /api/routes/calculate {origen,destino,weights}, Entonces el servicio devuelve top-3 rutas con métricas (ETA, distancia, riesgo) y 200.

Escenario 2: Inconsistencia en datos
Dado que el motor no puede converger por inconsistencias, Cuando se solicita cálculo, Entonces el servicio devuelve 422 con diagnóstico.	EPIC005

TS-10	API: métricas y desglose por ruta	Como servicio técnico, quiere que el endpoint de rutas devuelva un payload con métricas detalladas (fuelEstimate, ETA, riskScore), para que clientes consuman datos normalizados.	Escenario 1: Payload completo
Dado que el cálculo completo se realizó, Cuando se GET /api/routes/{id}, Entonces la API devuelve JSON con distance_nm, eta_iso, fuel_estimate y risk_score.

Escenario 2: Cálculo parcial
Dado que el cálculo incompleto, Cuando se GET /api/routes/{id}, Entonces la API devuelve 206 con campos parciales y advertencia.	

TS-11	API: generación y ranking de alternativas	Como componente técnico, quiere un proceso que genere y rankee alternativas (A*/variantes), para exponer top-3 con justificaciones numéricas.	Escenario 1: Generación OK
Dado que el proceso tiene datos, Cuando se POST /api/routes/alternatives, Entonces la API devuelve array[3] con metrics y ranking.

Escenario 2: Parcial
Dado que no hay suficientes rutas, Cuando se solicita, Entonces la API devuelve menos items y flag partial:true.	

TS-12	API: explicación y métricas comparativas	Como servicio técnico, quiere endpoint que calcule y devuelva métricas comparativas entre rutas, para alimentar UI y auditoría.	Escenario 1: Comparación calculada
Dado que ambas rutas existen en DB, Cuando se POST /api/routes/compare {id1,id2}, Entonces la API devuelve JSON con deltas numéricos y drivers principales.

Escenario 2: ID inválido
Dado que algún id es inválido, Cuando se solicita comparación, Entonces la API devuelve 404.	EPIC005

TS-13	Pipeline de eventos y recalculo automático	Como componente técnico, quiere un servicio de ingestión de eventos y orquestador que dispare recalculo de rutas y versionado, para automatizar respuesta a cambios.	Escenario 1: Evento válido
Dado que llega evento externo con señal válida, Cuando el ingestor publica a la cola, Entonces el orquestador dispara recalculo y guarda nueva ruta.

Escenario 2: Evento inválido
Dado que evento inválido o corrupto, Cuando se recibe, Entonces se descarta con log y no se recalcula.	EPIC005

TS-14	API: geometría de ruta y segmentos	Como servicio técnico, quiere que las rutas devuelvan GeoJSON con identificadores de tramo y metadata temporal, para renderizado y animación en cliente.	Escenario 1: GeoJSON retornado
Dado que la ruta fue calculada, Cuando se GET /api/routes/{id}/geometry, Entonces la API devuelve GeoJSON con segmentos y tiempos.

Escenario 2: Ruta no existe
Dado que id no existe, Cuando se solicita, Entonces la API devuelve 404.	EPIC005

TS-15	Pipeline de ingestión meteorológica y mapeo a grafo	Como componente técnico, quiere pipeline que consuma feeds meteo/oceanográficos, normalice y actualice atributos de arista, para mantener datos de forecast aplicables.	Escenario 1: Actualización OK
Dado que el feed está en formato esperado, Cuando el pipeline lo procesa, Entonces actualiza aristas con forecast_id y valid_until.

Escenario 2: Esquema inesperado
Dado que el feed no cumple esquema, Cuando el pipeline procesa, Entonces registra y descarta lote.	EPIC005

## 3.3. Requisitos Funcionales

Los Requisitos Funcionales formalizan qué hace el sistema Mushroom desde la perspectiva del dominio y de los usuarios, sin entrar en detalles de diseño o tecnología. Esta sección traduce las épicas y las historias de usuario (user stories), previamente definidas por bounded context, en enunciados claros, verificables y priotizados que guían el desarrollo, las pruebas y la validación. Cada requisito funcional describe una capacidad obligatoria del sistema, su actor responsable y las condiciones necesarias para que la funcionalidad cumpla su propósito operacional.

Los Requisitos Funcionales aquí incluidos cubren las funcionalidades de los bounded contexts principales del producto. No documentan interfaces gráficas ni decisiones de UI, se centran exclusivamente en la función qué hace la plataforma, la integridad de los datos, la orquestación entre capas (comandos, consultas y eventos) y las garantías mínimas esperadas.

###### Tabla 7
*Listado de requisitos funcionales a desarrollar en el proyecto de Mushroom*

| **ID** | **Actor** | **Descripción** |
|--------|-----------|-----------------|
| RF001 | Agencias de embarcaciones navieras / Exportadores e importadores de alta rotación | El sistema debe permitir al visitante acceder a la landing page pública con contenido informativo sobre la propuesta de valor, casos de uso y formulario de contacto (contenido estático). | 
| RF002 | Agencias de embarcaciones navieras / Exportadores e importadores de alta rotación | El sistema debe permitir al visitante entrar directamente a la Single Page Application a través de un Call-to-Action en la sección de encabezado, después de mostrar las funcionalidades y antes de llegar al footer. |
| RF003 | Agencias de embarcaciones navieras / Exportadores e importadores de alta rotación | El sistema debe permitir a un usuario registrarse creando una cuenta con email válido y contraseña que cumpla políticas mínimas (longitud mínima de 8 caracteres, letras minúsculas y mayúsculas, un número y un símbolo), y enviar un correo de verificación para activar la cuenta. |
| RF004 | Agencias de embarcaciones navieras / Exportadores e importadores de alta rotación | El sistema debe permitir al usuario iniciar sesión con credenciales válidas y, tras autenticación exitosa, emitir token de sesión con roles asociados. | 
| RF005 | Agencias de embarcaciones navieras | El sistema debe permitir listar todos los puertos registrados con su estado operativo (operativo / cerrado / restringido) y metadatos básicos: nombre, continente, latitud y longitud. |
| RF006 | Agencias de embarcaciones navieras | El sistema debe permitir buscar y seleccionar un puerto origen y un puerto destino válidos para iniciar el cálculo de rutas, validando que ambos pertenezcan al grafo de navegación y no sean idénticos. |
| RF007 | Agencias de embarcaciones navieras | El sistema debe calcular la ruta optimizada mediante criterio múltiple entre origen y destino. El objetivo del multi-criterio es minimizar la distancia en millas náuticas y minimizar el puntaje de riesgo. Debe devolver nodos, distancia total en nm y ETA. La implementación debe  documentar que la prioridad operacional es distancia mínima junto al menor riesgo. | 
| RF008 | Agencias de embarcaciones navieras | El sistema debe presentar, junto con la ruta calculada, un desglose con distancia total de la ruta, tiempo estimado, combustible usado estimado y posible riesgo. | 
| RF009 | Agencias de embarcaciones navieras | El sistema debe devolver las top-3 alternativas para el caso, evaluadas por la el modelo de Inteligencia (AI/algoritmo) priorizando menor distancia y menor riesgo, e incluir métricas comparativas (ETA, distancia, riesgo).
| RF010 | Agencias de embarcaciones navieras | El sistema debe permitir al usuario solicitar una justificación cuantitativa de por qué una ruta fue elegida frente a otra, devolviendo valores numéricos del total de la ruta en una pequeña notificación. | 
| RF011 | Agencias de embarcaciones navieras | El sistema debe almacenar automáticamente el último viaje realizado en el historial para futura consulta. Se debe mantener registros de tiempo de nombre, tiempo de inicio, tiempo de fin, ruta usada con puerto origen y destino, distancia recorrida (nm) y emisiones. | 
| RF012 | Agencias de embarcaciones navieras | El sistema debe permitir al usuario generar un reporte descargable de cada uno de los viajes realizados en la aplicación (PDF/CSV), los cuales deben mostrar el tipo de inicio, tiempo de fin, ruta usada con puerto origen y destino, distancia (nm) y emisiones detalladas. | 
| RF013 | Agencias de embarcaciones navieras | El sistema debe exponer un historial de rutas que permita filtrar por fecha, origen y destino, y paginar resultados para consultas de gran volumen. | 
| RF014 | Agencias de embarcaciones navieras | El sistema debe consultar las restricciones del puerto según su estado operativo y rechazar automáticamente la inclusión de un puerto de llegada no apto, informando una breve justificación (texto corto) del motivo. |
| RF015 | Agencias de embarcaciones navieras | El sistema debe detectar eventos externos (cierres de puerto, incidentes, cambios de estado, forecast) y recalcular automáticamente la ruta activa cuando su viabilidad cambie. Se debe registrar la nueva ruta sugerida y la diferencia de métricas. | 
| RF016 | Agencias de embarcaciones navieras | El sistema debe permitir a cada usuario configurar preferencias de notificaciones (tipos de alertas y canales) y aplicar dichas preferencias a las entregas de notificaciones. | 
| RF017 | Agencias de embarcaciones navieras | El sistema debe permitir consultar la ficha de un puerto seleccionado en el mapa, devolviendo: nombre, continente y estado operativo con restricciones. Las restricciones incluirán una breve justificación. | 
| RF018 | Agencias de embarcaciones navieras | El sistema debe visualizar la geometría de la ruta y los identificadores de tramo para renderizar mapas y mostrar una animación esperada del viaje. | 
| RF019 | Agencias de embarcaciones navieras | El sistema debe ofrecer funcionalidad de “Rutas más buscadas” que agregue y devuelva las rutas más consultadas por otros usuarios durante un período configurable, permitiendo filtrado por continente o puertos específicos. |
| RF020 | Exportadores e importadores de alta rotación | El sistema debe calcular el coste estimado completo asociado a una operación (incoterms) cuando el usuario proporcione parámetros (peso, valor de la mercadería, incoterm preferible, origen/destino), devolviendo desglose de flete, seguros y total estimado, además del Incoterm recomendado según los datos. | 
| RF021 | Agencias de embarcaciones navieras / Exportadores e importadores de alta rotación | El sistema debe ingerir pronósticos meteorológicos y datos oceanográficos, mapearlos a aristas del grafo y marcar su validez para que los consumidores usen la versión más reciente o el último forecast válido (y afectar tiempos/riesgo donde corresponda).| 

## 3.4. Requisitos No Funcionales

Los Requisitos No Funcionales describen cómo debe comportarse el sistema Mushroom más allá de las funciones concretas: establecen criterios de calidad, restricciones y expectativas medibles que garantizan la calidad del producto final para los usuarios. Mientras los Requisitos Funcionales definen capacidades observables (qué hace el sistema), los Requisitos No Funcionales fijan las condiciones bajo las cuales esas capacidades deben operar para ser aceptables para clientes y operaciones.

Esta sección cubre las propiedades de calidad aplicables a todos los bounded contexts relevantes. Incluye métricas objetivs y criterios claros de verificación. Los Requisitos No Funcionales no dictan la implementación (no indican llamadas de API concretas ni tecnología) pero sí imponen límites y garantías que la implementación debe cumplir.

###### Tabla 8
*Listado de requisitos no funcionales necesarios para mantener la calidad en el proyecto de Mushroom*

| **ID** | **Categoría (QA)** | **Descripción** |
|--------|--------------------|-----------------|
| RNF001 | Rendimiento | El tiempo de respuesta de todas las páginas de la aplicación debe ser de 2.0 segundos Como máximo. Para peticiones en base a las funcionalidades de cálculo de rutas y valores predictivos, debe ser 5.0 segundos como máximo. Ambas métricas son bajo una carga de 100 peticiones concurrentes. |
| RNF002 | Usabilidad | El sistema debe permitir que el 90% de los usuarios objetivos completen las tareas relacionadas a funcionalidades principales (calcular ruta, puntaje de rutas, ver tiempo estimado de llegada) en un máximo de tres pasos o interacciones dentro de la aplicación, tanto en web como en móvil. |
| RNF003 | Disponibilidad | El sistema debe garantizar una disponibilidad del 99 % mensual para los servicios de funcionalidades principales (calcular ruta, puntaje de rutas, ver tiempo estimado de llegada) durante el horario de operación 24/7. Las ventanas planificadas de mantenimiento no contabilizan disponibilidad siempre que se notifiquen con al menos 72 horas de antelación. |
| RNF004 | Seguridad | Toda la información sensible y las claves secretas deben almacenarse cifradas utilizando el estándar Advanced Encryption Standard (AES) con claves de 256 bits, y las comunicaciones entre componentes deben emplear TLP; no se debe almacenar ninguna contraseña en texto plano. |
| RNF005 | Mantenimiento | El tiempo medio para recuperar el servicio ante un fallo crítico operativo, medido desde la detección hasta la restauración o mitigación inicial, no debe exceder los 30 minutos. Este tiempo incluye la activación de procedimientos de respuesta y la aplicación de la corrección o el cambio de configuración necesario. |
| RNF006 | Escalabilidad | La arquitectura debe poder escalar la capa de cálculo de rutas y el servicio de estimación de tiempos y riesgos de modo que soporten aumentos de demanda del 75% y un aumento del 50% en el volumen de datos sin que el tiempo de respuesta de las funciones exceda los 5.0 segundos para el 90% de solicitudes. |
| RNF007 | Fiabilidad | La tasa de errores en procesos de cálculo de rutas y estimación de riesgos (Tanto en la ruta principal como en las rutas alternativas) no debe ser superior al 0.5% del total de cálculos en cualquier periodo mensual. Si se sobrepasa este umbral, el sistema debe generar una alerta crítica y abrir un incidente de operación.|
| RNF008 | Privacidad | Los datos personales deben tratarse conforme a la política interna de privacidad de la aplicación. Deben retenerse durante un periodo predeterminado de 2 años y deben estar disponibles para su eliminación por solicitud del titular dentro de 30 días hábiles y todos los accesos a datos personales deben registrarse con identificación del solicitante y motivo.|
| RNF009 | Accesibilidad | Las vistas críticas de la solución desplegadas en la web y en la aplicación móvil deben cumplir los criterios de accesibilidad de nivel AA de las directrices de contenido accesible para la web, con un puntaje mínimo de 90%. La conformidad se verificará mediante auditorías automatizadas y pruebas manuales con usuarios.|
| RNF010 | Integridad de datos | La plataforma debe garantizar la integridad de los datos expuestos en la aplicación y datos ingresados por los usuarios o APIs externas, de forma que el porcentaje de pérdida o corrupción detectada en la ingestión no supere el 0.05% durante observación de 24 horas. Se debe tener un registro de estados para verificar la integridad en todo momento. |
| RNF011 | Compatibilidad | La plataforma debe ser compatible con los entornos y fuentes de datos más utilizados por los usuarios finales. Específicamente, debe operar correctamente en Google Chrome, Mozilla FireFox, Microsoft Edge, por parte de escritorio, y en móvil debe operar tanto en Android como iOS. La comprobación se realizará con pruebas de integración automática. Al menos el 90% de las pruebas de compatibilidad deben pasar sin intervención manual. |

## 3.5. Impact Mapping

En esta sección presentamos el Impact Mapping diseñado para el modelo de negocio digital de Mushroom. A través de capturas de la herramienta utilizada, mostraremos cómo hemos formalizado este ejercicio de planificación estratégica en cuatro niveles interrelacionados: Business Goals, Actors/Personas, Impacts y Deliverables. Partiendo de objetivos de negocio definidos bajo criterios SMART, vinculamos cada meta con los User Personas identificados en secciones anteriores, respondiendo a la pregunta “¿Quiénes me ayudarán a lograr la meta?”.

A continuación detallamos los comportamientos deseados de esos actores (“¿Qué tendrían que hacer?”) y, finalmente, los entregables o iniciativas concretas que el negocio debe desarrollar para provocar dichos cambios.

El uso del Impact Mapping garantiza que cada User Story y cada funcionalidad propuesta estén alineadas con los objetivos estratégicos de la startup, evitando el desarrollo de características innecesarias. La columna de Deliverables recoge las acciones digitales, desde campañas de onboarding personalizado hasta módulos de recomendación inteligente, que buscamos implementar para influir en los impactos definidos. Esta metodología, tal como la describe Flewelling (2018), facilita una hoja de ruta clara y adaptable, centrada en resultados medibles y en la creación de valor real para nuestros usuarios y stakeholders.

###### Figura 16
*Impact Mapping de nuestro segmento objetivo de agencias de embarcaciones navieras*

<td><img src="../../assets/img/chapter-III/Impact-Mapping-2.png" style="width:1000px; height:auto;" alt=""></td>

###### Figura 17
*Impact Mapping de nuestro segmento de transportistas marítimos*

<td><img src="../../assets/img/chapter-III/Impact-Mapping-1.png" style="width:1000px; height:auto;" alt=""></td>

##### 3.6. Product Backlog

En esta sección presentamos el Product Backlog de Macetech, donde hemos recopilado y ordenado todas las User Stories y Technical Stories identificadas a lo largo del proyecto, incluyendo aquellas vinculadas a la Landing Page, la plataforma web y móvil, y las integraciones de backend. Cada historia está estimada en función de su complejidad, riesgo y esfuerzo, y priorizada según su valor para el usuario, urgencia, impacto en el negocio y viabilidad técnica.

Para asegurar la transparencia y facilitar la colaboración con todos los stakeholders, incluimos una captura del Backlog alojado en la herramienta designada, junto con el enlace público de acceso. Este enfoque sigue las recomendaciones de User Story Mapping de Patton (2021), que subraya la necesidad de alinear la priorización con los resultados de negocio deseados, y las buenas prácticas de Stevenson (2020) sobre estimación y redacción de historias, garantizando que cada entrada cuente con criterios claros de aceptación y sea comprensible para el equipo de desarrollo.

El orden de las entradas en el Backlog refleja la máxima creación de valor en cada sprint: las historias relacionadas con la experiencia del visitante en el sitio web estático ocupan los primeros puestos, mientras que los requisitos de seguridad o autenticación, aunque críticos, han sido ubicados de forma estratégica para no retrasar la entrega de funcionalidades de alto impacto inicial.

###### Tabla 9
*Product Backlog priorizado para el proyecto de Mushroom*

| **ID** | **Título** | **Descripción (Formato User Story)** | **Story Points** |
|-------|-------------|---------------------------------------|------------------|
| US01 | Visualizar lista de puertos disponibles | Como usuario, **Quiero** visualizar una lista de puertos disponibles para poder saber por donde no puedo navegar. | 8 |
| US02 | Mostrar ruta más corta entre dos puertos | Como usuario, **Quiero** que el sistema calcule y muestre la ruta más corta entre dos puertos, para optimizar el tiempo de viaje. | 8 |
| US03 | Permitir seleccionar puerto de origen y destino | Como usuario, **Quiero** seleccionar manualmente el puerto de salida y el de llegada para personalizar mi trayecto. | 8 |
| US04 | Mostrar información básica del viaje | Como usuario, **Quiero** visualizar información básica del viaje como tiempo estimado y cantidad de nodos recorridos para tener control de mi navegación. | 2 |
| US05 | Reporte de navegación | Como usuario, **Quiero** recibir un reporte final de mi viaje para analizar la ruta tomada, eventos ocurridos y tiempos de recorrido. | 3 |
| US06 | Visualizar mapa esquemático de los puertos | Como usuario, **Quiero** ver un mapa esquemático de los puertos para entender gráficamente el trayecto. | 3 |
| US07 | Guardar último viaje realizado | Como usuario, **Quiero** guardar el último viaje realizado para poder revisarlo posteriormente y evaluar mi desempeño. | 2 |
| US08 | Ver información del puerto actual | Como capitán, **Quiero** ver información de los puertos, para evaluar si puedo detenerme.El sistema debe mostrar nombre, país y estado (abierto/cerrado) de los puertos. | 5 |
| US09 | Iniciar sesión | Como usuario registrado, **Quiero** iniciar sesión para acceder a mi cuenta para usar el programa | 2 |
| US10 | Registrar un usuario | Como nuevo usuario, **Quiero** registrarme en la plataforma para poder acceder a todas sus funcionalidades | 2 |
| US11 | Puertos intermedios | Como capitan, **Quiero**  poder añadir puertos intermedios a la ruta para poder redirigirme correctamente a el por si existe alguna emergencia. | 8 |
| US12 | Historial de rutas |  Como capitán, **Quiero** guardar una ruta personalizada después de calcularla, para reutilizarla en futuros viajes similares. | 5 |
| US13 | Rutas más Buscadas |  Como usuario, **Quiero** poder visualizar las rutas mas buscadas entre los demas usuarios, para para ver si una coincide con la que estoy buscando. | 5 |
| US14 | Cálculo de Incoterms |  Como usuario, **Quiero** poder calcular el monto total que me costará una importacion o exportacion, para poder armar un presupuesto acorde a la operación. | 8 |
| US15 | Cálculo de distancia |  Como usuario, **Quiero** poder visualizar la distancia total que se recorre entre los puertos de origen, intermedios, y destino, para poder tomar dimension del tiempo que llevará el trayecto. | 3 |
| US16 | Preferencia de notificaciones |  Como usuario, **Quiero** poder elegir las notificaciones que me interesan recibir, como cierres de ruta o alertas de clima en distintas zonas, para poder tener en cuenta estos factores al elegir la ruta que **Quiero** seguir. | 3 |
